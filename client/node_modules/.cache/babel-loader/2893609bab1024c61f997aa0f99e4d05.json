{"ast":null,"code":"import _slicedToArray from\"/home/matt/Documents/new-personal-projects/e-commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useGlobalContext}from'../context/Context';import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CartContents=function CartContents(_ref){var children=_ref.children;var _useGlobalContext=useGlobalContext(),cart=_useGlobalContext.cart,deleted=_useGlobalContext.deleted,setDeleted=_useGlobalContext.setDeleted;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),singleProductId=_useState2[0],setSingleProductId=_useState2[1];var navigate=useNavigate();//  delete item from cart\nvar handleSubmit=function handleSubmit(e){e.preventDefault();setDeleted(true);var productId=e.target.id;console.log(productId);var request={method:'POST',url:\"http://localhost:8001/delete-cart\",headers:{'Content-Type':'application/json'},data:{productId:productId}};axios(request).catch(function(err){return console.log(err);});};useEffect(function(){if(deleted){navigate('/cart');setDeleted(false);}},[cart]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"your-cart\",children:/*#__PURE__*/_jsx(\"h2\",{children:\" Your Cart\"})}),cart.map(function(item){var id=item.id,cartItem=item.cartItem,title=item.title,price=item.price,imageUrl=item.imageUrl;return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item-left\",children:[/*#__PURE__*/_jsx(\"h2\",{children:title}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Quantity: \",cartItem.quantity]}),/*#__PURE__*/_jsx(\"button\",{id:id,onClick:handleSubmit,className:\"default-button\",children:\"Delete from cart\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-item-right\",children:/*#__PURE__*/_jsx(\"img\",{src:imageUrl})}),\" \"]});})]})});};export default CartContents;","map":{"version":3,"sources":["/home/matt/Documents/new-personal-projects/e-commerce/src/components/CartContents.js"],"names":["React","useState","useEffect","useGlobalContext","useNavigate","axios","CartContents","children","cart","deleted","setDeleted","singleProductId","setSingleProductId","navigate","handleSubmit","e","preventDefault","productId","target","id","console","log","request","method","url","headers","data","catch","err","map","item","cartItem","title","price","imageUrl","quantity"],"mappings":"2IACA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAASC,gBAAT,KAAiC,oBAAjC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACC,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,6IAED,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAgB,IAAdC,CAAAA,QAAc,MAAdA,QAAc,CACrC,sBAAoCJ,gBAAgB,EAApD,CAAOK,IAAP,mBAAOA,IAAP,CAAaC,OAAb,mBAAaA,OAAb,CAAsBC,UAAtB,mBAAsBA,UAAtB,CACI,cAA8CT,QAAQ,CAAC,EAAD,CAAtD,wCAAOU,eAAP,eAAwBC,kBAAxB,eAEC,GAAMC,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CAED;AACJ,GAAMU,CAAAA,YAAY,CAAI,QAAhBA,CAAAA,YAAgB,CAAAC,CAAC,CAAI,CACvBA,CAAC,CAACC,cAAF,GACAN,UAAU,CAAC,IAAD,CAAV,CACA,GAAMO,CAAAA,SAAS,CAAGF,CAAC,CAACG,MAAF,CAASC,EAA3B,CACAC,OAAO,CAACC,GAAR,CAAYJ,SAAZ,EACA,GAAIK,CAAAA,OAAO,CAAG,CAACC,MAAM,CAAE,MAAT,CACNC,GAAG,CAAE,mCADC,CAENC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFH,CAKNC,IAAI,CAAE,CACHT,SAAS,CAAEA,SADR,CALA,CAAd,CAQQZ,KAAK,CAACiB,OAAD,CAAL,CACHK,KADG,CACG,SAAAC,GAAG,QAAIR,CAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ,CAAJ,EADN,EAC4B,CAdxC,CAgBK1B,SAAS,CAAC,UAAM,CACT,GAAIO,OAAJ,CAAa,CACXI,QAAQ,CAAC,OAAD,CAAR,CACAH,UAAU,CAAC,KAAD,CAAV,CACD,CACJ,CALK,CAKH,CAACF,IAAD,CALG,CAAT,CAOL,mBAEC,sCAEC,aAAK,SAAS,CAAC,MAAf,wBACE,YAAK,SAAS,CAAC,WAAf,uBACC,kCADD,EADF,CAIAA,IAAI,CAACqB,GAAL,CAAU,SAAAC,IAAI,CAAI,CACjB,GAAOX,CAAAA,EAAP,CAA+CW,IAA/C,CAAOX,EAAP,CAAWY,QAAX,CAA+CD,IAA/C,CAAWC,QAAX,CAAqBC,KAArB,CAA+CF,IAA/C,CAAqBE,KAArB,CAA4BC,KAA5B,CAA+CH,IAA/C,CAA4BG,KAA5B,CAAmCC,QAAnC,CAA+CJ,IAA/C,CAAmCI,QAAnC,CACD,mBACA,aAAK,SAAS,CAAC,WAAf,wBACE,aAAK,SAAS,CAAC,gBAAf,wBACA,oBAAKF,KAAL,EADA,cAEC,mCAAeD,QAAQ,CAACI,QAAxB,GAFD,cAGC,eAAQ,EAAE,CAAEhB,EAAZ,CAAgB,OAAO,CAAEL,YAAzB,CAAuC,SAAS,CAAC,gBAAjD,8BAHD,GADF,cAOI,YAAK,SAAS,CAAC,iBAAf,uBACA,YAAK,GAAG,CAAEoB,QAAV,EADA,EAPJ,OADA,CAYA,CAdA,CAJA,GAFD,EAFD,CA4BC,CA1DD,CA4DA,cAAe5B,CAAAA,YAAf","sourcesContent":["\nimport React, {useState, useEffect} from 'react';\nimport { useGlobalContext } from '../context/Context';\nimport { useNavigate } from \"react-router-dom\";\n import axios from \"axios\";    \n\nconst CartContents = ({children}) => {\nconst {cart, deleted, setDeleted} = useGlobalContext()\n    const [singleProductId, setSingleProductId] = useState([])\n\n     const navigate = useNavigate();\n    \n    //  delete item from cart\nconst handleSubmit =  e => {\n    e.preventDefault();\n    setDeleted(true)\n    const productId = e.target.id;\n    console.log(productId)\n    let request = {method: 'POST',\n            url: \"http://localhost:8001/delete-cart\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            data: {\n               productId: productId }}\n              \n            axios(request)\n        .catch(err => console.log(err))};\n\n     useEffect(() => {\n            if (deleted) {\n              navigate('/cart')\n              setDeleted(false)\n            }\n        }, [cart])\n\nreturn (\n\n <>\n \n  <div className='cart'>\n    <div className='your-cart'>\n     <h2> Your Cart</h2>\n    </div>\n {cart.map((item => {\n   const {id, cartItem, title, price, imageUrl} = item;\n  return (\n  <div className=\"cart-item\">\n    <div className=\"cart-item-left\">\n    <h2>{title}</h2>\n     <h4>Quantity: {cartItem.quantity}</h4>\n     <button id={id} onClick={handleSubmit} className=\"default-button\">Delete from cart</button>\n     </div> \n     \n      <div className=\"cart-item-right\">\n      <img src={imageUrl}/>\n      </div> </div>\n  )\n }))}\n\n </div>\n\n </>\n  );\n};\n\nexport default CartContents;\n"]},"metadata":{},"sourceType":"module"}