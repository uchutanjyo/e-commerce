{"ast":null,"code":"import _defineProperty from\"/home/matt/Documents/new-personal-projects/e-commerce/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/matt/Documents/new-personal-projects/e-commerce/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/matt/Documents/new-personal-projects/e-commerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/matt/Documents/new-personal-projects/e-commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/matt/Documents/new-personal-projects/e-commerce/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';import React,{useState,useCallback,useContext,useEffect}from'react';import reducer from'./reducer';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var AppContext=/*#__PURE__*/React.createContext();var AppProvider=function AppProvider(_ref){var _ref4;var children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],isLoading=_useState2[1];// sets up state for Loading component\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchTerm=_useState4[0],setSearchTerm=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),products=_useState6[0],setProducts=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),show=_useState8[0],setShow=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),cart=_useState10[0],setCart=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),deleted=_useState12[0],setDeleted=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),redirect=_useState14[0],setRedirect=_useState14[1];var cartUrl='http://localhost:8001/cart';var getCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,newCart;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isLoading(true);_context.next=3;return axios.get(cartUrl);case 3:data=_context.sent;newCart=data.data;setCart(newCart);isLoading(false);return _context.abrupt(\"return\",cart.catch(function(error){console.log(error);}));case 8:case\"end\":return _context.stop();}}},_callee);}));return function getCart(){return _ref2.apply(this,arguments);};}();useEffect(function(){getCart();},[redirect]);useEffect(function(){getCart();},[deleted]);var url='http://localhost:8001/products';var getProducts=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data,newProducts;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:isLoading(true);_context2.prev=1;_context2.next=4;return axios.get(url);case 4:data=_context2.sent;newProducts=data.data;setProducts(newProducts);isLoading(false);_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[1,10]]);}));return function getProducts(){return _ref3.apply(this,arguments);};}();useEffect(function(){getProducts();},[]);var filtered=products.map(function(item){var title=item.title;return _objectSpread(_objectSpread({},item),{},{title:title.toLowerCase()});}).filter(function(product){return product.title.includes(searchTerm.toLowerCase());});console.log(filtered);// really bad workaround for an issue i was having. in order to make product search case-insensitive, i  mapped products array (state) to a new array, and converted the title property to lowercase.this new array is then filtered - a check is done against the searchTerm (what is typed in the search box) which is also converted to lowercase. the title of each product is then converted to uppercase later on rendering. \nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(AppContext.Provider,{value:(_ref4={loading:loading,searchTerm:searchTerm,products:products,setSearchTerm:setSearchTerm,getProducts:getProducts,filtered:filtered,show:show,setShow:setShow,cart:cart,setCart:setCart,getCart:getCart,redirect:redirect,setRedirect:setRedirect},_defineProperty(_ref4,\"getCart\",getCart),_defineProperty(_ref4,\"deleted\",deleted),_defineProperty(_ref4,\"setDeleted\",setDeleted),_ref4),children:[\" \",children]})});};export var useGlobalContext=function useGlobalContext(){return useContext(AppContext);};export{AppContext,AppProvider};","map":{"version":3,"sources":["/home/matt/Documents/new-personal-projects/e-commerce/src/context/Context.js"],"names":["axios","React","useState","useCallback","useContext","useEffect","reducer","AppContext","createContext","AppProvider","children","loading","isLoading","searchTerm","setSearchTerm","products","setProducts","show","setShow","cart","setCart","deleted","setDeleted","redirect","setRedirect","cartUrl","getCart","get","data","newCart","catch","error","console","log","url","getProducts","newProducts","filtered","map","item","title","toLowerCase","filter","product","includes","useGlobalContext"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport React, {useState, useCallback, useContext, useEffect} from 'react'\nimport reducer from './reducer'\n\nconst AppContext = React.createContext();\n\nconst AppProvider = ({children}) => {\n\n        const [loading, isLoading] = useState(false)\n        // sets up state for Loading component\n        const [searchTerm, setSearchTerm] = useState('')\n        const [products, setProducts] = useState([])\n        const [show, setShow] = useState(false);\n\n        const [cart, setCart] = useState([])\n\n        const [deleted, setDeleted] = useState(false)\n        const [redirect, setRedirect] = useState(false)\n \n\n\n\n         \n   const cartUrl =\n    'http://localhost:8001/cart'\n\n         \n   const getCart = async () => {\n        isLoading(true)\n        const data = await axios.get(cartUrl);\n        const newCart = data.data\n            setCart(newCart)\n        isLoading(false)\n        return cart       \n          .catch(error => {\n        console.log(error);\n        })}\n\n           useEffect(()=> {\n            getCart()\n        }, [redirect]) \n\n         useEffect(()=> {\n            getCart()\n        }, [deleted]) \n\n    \n\n          const url =\n    'http://localhost:8001/products'\n  \n        const getProducts =async () => {\n        isLoading(true)\n        try {\n        const data = await axios.get(url);\n        const newProducts = data.data\n        setProducts(newProducts)\n        isLoading(false)\n\n        }  catch(error) {\n        console.log(error);\n        } }\n\n           useEffect(()=> {\n            getProducts()\n        }, [])\n    \n\nlet filtered  = products.map((item) => { \n            const {title} = item;\n            return {...item, title: title.toLowerCase()}})\n            .filter((product)=> {\n    return product.title.includes(searchTerm.toLowerCase())  \n})\n\nconsole.log(filtered)\n\n// really bad workaround for an issue i was having. in order to make product search case-insensitive, i  mapped products array (state) to a new array, and converted the title property to lowercase.this new array is then filtered - a check is done against the searchTerm (what is typed in the search box) which is also converted to lowercase. the title of each product is then converted to uppercase later on rendering. \n \n\n    return<>\n    <AppContext.Provider value={{\n        loading,\n        searchTerm,\n        products,\n        setSearchTerm,\n        getProducts,\n        filtered,\n        show,\n        setShow,\n        cart,\n        setCart,\n        getCart,\n        redirect,\n        setRedirect,\n        getCart,\n        deleted, \n        setDeleted\n        // handleClick\n\n    }}> {children}\n    </AppContext.Provider>\n    </>\n}\n\nexport const useGlobalContext = () => {\nreturn useContext(AppContext)\n}\n\nexport {AppContext, AppProvider}"]},"metadata":{},"sourceType":"module"}